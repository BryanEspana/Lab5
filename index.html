<html>
<head>
</head>
<body>
  <script type="application/javascript">
    // Crear contenedor del chat
    const chatContainer = document.createElement('section');
    document.body.appendChild(chatContainer);
    chatContainer.style.display = 'flex';
    chatContainer.style.flexDirection = 'column';
    chatContainer.style.height = '100vh';

    // Crear botón para cambiar de tema
    const themeToggler = document.createElement('button');
    themeToggler.textContent = 'Cambiar tema';
    themeToggler.style.margin = '10px';
    themeToggler.style.cursor = 'pointer';
    chatContainer.appendChild(themeToggler);

    // Crear contenedor para los mensajes
    const messagesContainer = document.createElement('article');
    messagesContainer.style.flexGrow = '1';
    messagesContainer.style.overflowY = 'auto';
    messagesContainer.style.padding = '10px';
    chatContainer.appendChild(messagesContainer);

    // Crear input para escribir mensajes
    const messageInput = document.createElement('input');
    messageInput.type = 'text';
    messageInput.placeholder = 'Escribe un mensaje...';
    messageInput.maxLength = 140;
    messageInput.style.margin = '10px';
    messageInput.style.width = 'calc(100% - 20px)';
    messageInput.style.padding = '10px';
    chatContainer.appendChild(messageInput);

    // Función para agregar mensajes al contenedor
    function addMessage(text) {
      const messageElement = document.createElement('p');
      messageElement.textContent = text;
      messagesContainer.appendChild(messageElement);
      messageElement.style.marginBottom = '10px';
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    // Evento para enviar mensaje con Enter
    messageInput.addEventListener('keypress', function(event) {
      if (event.key === 'Enter' && messageInput.value.trim() !== '') {
        addMessage(messageInput.value);
        messageInput.value = '';
        event.preventDefault();
      }
    });

    // Función para cambiar el tema
    function toggleTheme() {
      const currentTheme = localStorage.getItem('theme') || 'light';
      if (currentTheme === 'light') {
        document.body.style.backgroundColor = '#333';
        document.body.style.color = '#fff';
        localStorage.setItem('theme', 'dark');
      } else {
        document.body.style.backgroundColor = '#fff';
        document.body.style.color = '#000';
        localStorage.setItem('theme', 'light');
      }
    }

    // Evento para el botón de cambiar tema
    themeToggler.addEventListener('click', toggleTheme);

    // Cargar el tema guardado al cargar la página
    document.addEventListener('DOMContentLoaded', () => {
      const preferredTheme = localStorage.getItem('theme');
      if (preferredTheme === 'dark') {
        toggleTheme();
      }
    });

    // Animación en el input
    messageInput.addEventListener('focus', () => {
      messageInput.style.transition = 'width 0.5s';
      messageInput.style.width = '100%';
    });

    messageInput.addEventListener('blur', () => {
      messageInput.style.width = 'calc(100% - 20px)';
    });
  </script>
</body>
</html>
