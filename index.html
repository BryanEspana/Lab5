<html>
<head>
</head>
<body>
  <script type="application/javascript">

    document.body.style.margin = "0";
    document.body.style.padding = "0";

    const mainContainer = document.createElement('div');
    mainContainer.style.display = 'flex';
    mainContainer.style.height = '95vh';
    document.body.appendChild(mainContainer);

    const chatListContainer = document.createElement('div');
    chatListContainer.style.width = '20%';
    chatListContainer.style.height = '100vh';
    chatListContainer.style.backgroundColor = 'white';
    chatListContainer.style.overflowY = 'auto';
    chatListContainer.style.borderRight = '2px solid #ccc';
    chatListContainer.style.display = 'flex';
    chatListContainer.style.flexDirection = 'column'; 
    chatListContainer.style.justifyContent = 'space-between'; 

    mainContainer.appendChild(chatListContainer);
    
    
    const userInfoContainer = document.createElement('div');
    userInfoContainer.style.display = 'flex';
    userInfoContainer.style.flexDirection = 'row';
    userInfoContainer.style.alignItems = 'center';
    userInfoContainer.style.padding = '10px 3px';
    userInfoContainer.style.borderBottom = '2px solid #ccc';

    const userImage = document.createElement('img');
    userImage.src = 'user.svg';
    userImage.style.width = '40px';
    userImage.style.height = '40px';
    userImage.style.borderRadius = '50%';
    userImage.style.backgroundColor = 'white'; 
    userImage.style.objectFit = 'fill';
    userImage.style.boxShadow = '0 0 5px rgba(0, 0, 0, 0.8)';
    userImage.style.margin = '10px';

    // Configuración para userName
    const userName = document.createElement('p');
    userName.textContent = 'Nombre del Usuario';
    userName.style.color = 'inherit';
    userName.style.paddingLeft = '10px';
    userName.style.margin = '0';

    // Agrega userImage y userName a userInfoContainer
    userInfoContainer.appendChild(userImage);
    userInfoContainer.appendChild(userName); 

    // Crear botón para cambiar de tema
    const themeToggler = document.createElement('button');
    themeToggler.textContent = 'Tema';
    themeToggler.style.margin = '10px';
    themeToggler.style.width = '100px';
    themeToggler.style.backgroundColor = 'white';
    themeToggler.style.border = 'none';
    themeToggler.style.boxShadow = '0 0 5px rgba(0, 0, 0, 0.8)';
    themeToggler.style.padding = '10px 5px';
    themeToggler.style.borderRadius = '5px';
    themeToggler.style.cursor = 'pointer';
    userInfoContainer.appendChild(themeToggler); //themeToggler


    // Agrega userInfoContainer al final del chatListContainer
    chatListContainer.appendChild(userInfoContainer);
    
    const chatAppContainer = document.createElement('div');
    chatAppContainer.style.width = '80%';
    chatAppContainer.style.height = '100vh';
    chatAppContainer.style.display = 'flex';
    chatAppContainer.style.flexDirection = 'column';
    mainContainer.appendChild(chatAppContainer);
    // Crear contenedor del chat
    const chatContainer = document.createElement('section');
    chatAppContainer.appendChild(chatContainer);
    chatContainer.style.display = 'flex';
    chatContainer.style.flexDirection = 'column';
    chatContainer.style.height = '100vh';



    //chatContainer.appendChild(themeToggler);

    // Crear contenedor para los mensajes
    const messagesContainer = document.createElement('article');
    messagesContainer.style.flexGrow = '1';
    messagesContainer.style.overflowY = 'auto';
    messagesContainer.style.padding = '10px';
    messagesContainer.style.backgroundColor = '#e2e2e2';

    chatContainer.appendChild(messagesContainer);

    const messageInput = document.createElement('input');
    messageInput.type = 'text';
    messageInput.placeholder = 'Escribe un mensaje...';
    messageInput.maxLength = 140;
    messageInput.style.margin = '10px';
    messageInput.style.padding = '10px 20px';
    messageInput.style.height = '40px'; // Altura fija para evitar cambios al hacer clic
    messageInput.style.border = 'none';
    messageInput.style.boxShadow = '0 0 5px rgba(0, 0, 0, 0.8)';
    messageInput.style.borderRadius = '5px';
    chatContainer.appendChild(messageInput);

    // Función para agregar mensajes al contenedor
    function addMessage(text) {
      // Crea un contenedor para el mensaje y el indicador "Yo"
      const messageContainer = document.createElement('div');
      messageContainer.style.display = 'flex';
      messageContainer.style.flexDirection = 'column';
      messageContainer.style.alignItems = 'flex-end'; // Alinea los mensajes a la derecha
      messageContainer.style.marginBottom = '10px';

      // Crea un div para el mensaje que parezca una nube de chat
      const messageBubble = document.createElement('div');
      messageBubble.textContent = text;
      messageBubble.style.backgroundColor = '#ffff'; // Color de fondo azul
      messageBubble.style.color = 'black'; // Texto en color blanco
      messageBubble.style.padding = '10px';
      messageBubble.style.borderRadius = '15px'; // Bordes redondeados para el efecto de nube
      messageBubble.style.boxShadow = '0 0 5px rgba(0, 0, 0, 0.2)';
      messageBubble.style.maxWidth = '80%'; // Máximo ancho del mensaje
      messageBubble.style.wordBreak = 'break-word'; // Asegura que el texto se ajuste dentro del bubble

      // Crea un pequeño div para el texto "Yo"
      const senderIndicator = document.createElement('div');
      senderIndicator.textContent = "Yo";
      senderIndicator.style.fontSize = '0.8rem'; // Tamaño de fuente más pequeño
      senderIndicator.style.marginRight = '5px'; // Un pequeño margen a la derecha

      // Agrega el mensaje y el indicador "Yo" al contenedor
      messageContainer.appendChild(senderIndicator);
      messageContainer.appendChild(messageBubble);

      // Agrega el contenedor de mensaje al contenedor principal de mensajes
      messagesContainer.appendChild(messageContainer);

      // Desplaza el contenedor de mensajes al último mensaje
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }


    // Evento para enviar mensaje con Enter
    messageInput.addEventListener('keypress', function(event) {
      if (event.key === 'Enter' && messageInput.value.trim() !== '') {
        addMessage(messageInput.value);
        messageInput.value = '';
        event.preventDefault();
      }
    });

    // Función para cambiar el tema
    function toggleTheme() {
      const currentTheme = localStorage.getItem('theme') || 'light';
    if (currentTheme === 'light') {
      document.body.style.backgroundColor = '#333';
      document.body.style.color = '#fff';
      chatListContainer.style.backgroundColor = '#333'; 
      
      chatListContainer.style.color = '#fff'; 
      localStorage.setItem('theme', 'dark');
    } else {
      document.body.style.backgroundColor = '#fff';
      document.body.style.color = '#000';
      chatListContainer.style.backgroundColor = '#fff';
      chatListContainer.style.color = '#000'; 
      localStorage.setItem('theme', 'light');
    }
    userInfoContainer.style.transition = 'background-color 1s, color 1s';
    chatListContainer.style.transition = 'background-color 1s, color 1s';
    document.body.style.transition = 'background-color 1s, color 1s';
    messagesContainer.style.transition = 'background-color 1s';

    if (currentTheme === 'light') {
      userInfoContainer.style.backgroundColor = '#333'; // Fondo oscuro
      userInfoContainer.style.color = '#fff'; // Texto claro
      chatListContainer.style.backgroundColor = '#333'; // Fondo oscuro
      chatListContainer.style.color = '#fff'; // Texto claro
      messagesContainer.style.backgroundColor = '#333333';
      document.body.style.backgroundColor = '#333'; 
      document.body.style.color = '#fff';
    } else {
      userInfoContainer.style.backgroundColor = '#fff'; // Fondo claro
      userInfoContainer.style.color = '#000'; // Texto oscuro
      messagesContainer.style.backgroundColor = '#e2e2e2';
      chatListContainer.style.backgroundColor = '#fff'; // Fondo claro
      chatListContainer.style.color = '#000'; // Texto oscuros
      document.body.style.backgroundColor = '#fff';
      document.body.style.color = '#000';
    }

    }

    // Evento para el botón de cambiar tema
    themeToggler.addEventListener('click', toggleTheme);

    // Cargar el tema guardado al cargar la página
    document.addEventListener('DOMContentLoaded', () => {
      const preferredTheme = localStorage.getItem('theme');
      if (preferredTheme === 'dark') {
        toggleTheme();
      }
    });


  </script>
</body>
</html>
